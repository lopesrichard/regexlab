class Ajax{constructor(url){this.xhttp=new XMLHttpRequest,this.url=url,this.onSuccess=function(){},this.onError=function(){},this.doBefore=function(){},this.doAfter=function(){}}get(responseType){this.prepare("GET",responseType),this.xhttp.send()}post(responseType,data){data=this.mapDataToSend(data),this.prepare("POST",responseType),this.xhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhttp.send(data)}before(handler){return this.doBefore=handler,this}after(handler){return this.doAfter=handler,this}prepare(method,responseType){this.xhttp.responseType=responseType,this.doBefore(),this.xhttp.open(method,this.url,!0);var self=this;this.xhttp.onreadystatechange=function(){4==this.readyState&&(self.doAfter(),200==this.status?self.onSuccess(this.response):self.onError(this.response))}}mapDataToSend(data){var params="";for(var param in data)params+=param+"="+data[param]+"&";return params.slice(0,-1)}success(handler){return this.onSuccess=handler,this}error(handler){return this.onError=handler,this}}